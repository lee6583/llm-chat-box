# LLM Chat Box 2.0 é¡¹ç›®ä»0åˆ°1æ„å»ºè¯´æ˜

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº Vue 3 çš„ç°ä»£åŒ– AI èŠå¤©åº”ç”¨ï¼Œæ”¯æŒæµå¼å“åº”ã€Markdown æ¸²æŸ“ã€ä»£ç é«˜äº®ç­‰åŠŸèƒ½ã€‚æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜é¡¹ç›®ä»é›¶å¼€å§‹çš„å®Œæ•´æ„å»ºè¿‡ç¨‹ï¼Œé€‚åˆé¢è¯•æ—¶æŠ€æœ¯ç‚¹è®²è§£ã€‚

---

## ğŸš€ ç¬¬ä¸€æ­¥ï¼šé¡¹ç›®åˆå§‹åŒ–ä¸ç¯å¢ƒæ­å»º

### 1.1 åˆ›å»ºé¡¹ç›®

```bash
# ä½¿ç”¨ Vite åˆ›å»º Vue 3 é¡¹ç›®
npm create vite@latest llm-chat-box -- --template vue

# æˆ–ä½¿ç”¨ pnpmï¼ˆæ¨èï¼Œæœ¬é¡¹ç›®ä½¿ç”¨ï¼‰
pnpm create vite llm-chat-box --template vue
```

**æŠ€æœ¯é€‰å‹ç†ç”±ï¼š**
- **Vite**ï¼šæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå¼€å‘æ—¶ä½¿ç”¨ ES æ¨¡å—ï¼Œå¯åŠ¨é€Ÿåº¦å¿«ï¼ˆæ¯«ç§’çº§ï¼‰
- **Vue 3**ï¼šé‡‡ç”¨ Composition APIï¼Œæ›´å¥½çš„ TypeScript æ”¯æŒï¼Œæ€§èƒ½æ›´ä¼˜

### 1.2 å®‰è£…æ ¸å¿ƒä¾èµ–

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd llm-chat-box

# å®‰è£…ä¾èµ–
pnpm install
```

### 1.3 å®‰è£…é¡¹ç›®æ‰€éœ€çš„æ ¸å¿ƒä¾èµ–åŒ…

```bash
# çŠ¶æ€ç®¡ç†
pnpm add pinia pinia-plugin-persistedstate

# è·¯ç”±ç®¡ç†
pnpm add vue-router

# UI ç»„ä»¶åº“
pnpm add element-plus @element-plus/icons-vue

# Markdown å¤„ç†
pnpm add markdown-it markdown-it-emoji markdown-it-link-attributes

# ä»£ç é«˜äº®
pnpm add highlight.js

# æ ·å¼å¤„ç†
pnpm add sass

# åŠ¨ç”»åº“
pnpm add animate.css
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **Pinia**ï¼šVue 3 å®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œæ¯” Vuex æ›´ç®€æ´ï¼Œæ”¯æŒ TypeScript
- **Element Plus**ï¼šåŸºäº Vue 3 çš„ç»„ä»¶åº“ï¼Œæä¾›ä¸°å¯Œçš„ UI ç»„ä»¶
- **Markdown-it**ï¼šé«˜æ€§èƒ½çš„ Markdown è§£æå™¨ï¼Œæ”¯æŒæ’ä»¶æ‰©å±•

### 1.4 å®‰è£…å¼€å‘ä¾èµ–

```bash
# è‡ªåŠ¨å¯¼å…¥æ’ä»¶ï¼ˆå‡å°‘ import è¯­å¥ï¼‰
pnpm add -D unplugin-auto-import unplugin-vue-components

# Vue DevTools æ’ä»¶
pnpm add -D vite-plugin-vue-devtools

# ä»£ç è§„èŒƒå·¥å…·
pnpm add -D eslint @eslint/js eslint-plugin-vue @vue/eslint-config-prettier prettier

# Git hooks
pnpm add -D husky lint-staged
```

---

## ğŸ”§ ç¬¬äºŒæ­¥ï¼šé¡¹ç›®é…ç½®

### 2.1 é…ç½® Vite (vite.config.js)

```javascript
import { fileURLToPath, URL } from 'node:url'
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import vueDevTools from 'vite-plugin-vue-devtools'
import AutoImport from 'unplugin-auto-import/vite'
import Components from 'unplugin-vue-components/vite'
import { ElementPlusResolver } from 'unplugin-vue-components/resolvers'

export default defineConfig({
  plugins: [
    vue(),
    vueDevTools(), // Vue å¼€å‘å·¥å…·
    AutoImport({
      resolvers: [ElementPlusResolver()], // Element Plus è‡ªåŠ¨å¯¼å…¥
    }),
    Components({
      resolvers: [ElementPlusResolver()], // Element Plus ç»„ä»¶è‡ªåŠ¨å¯¼å…¥
    }),
  ],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url)), // è·¯å¾„åˆ«å
    },
  },
})
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **è·¯å¾„åˆ«å**ï¼šä½¿ç”¨ `@` ä»£æ›¿ `./src`ï¼Œæé«˜ä»£ç å¯è¯»æ€§
- **è‡ªåŠ¨å¯¼å…¥**ï¼šæ— éœ€æ‰‹åŠ¨ import Element Plus ç»„ä»¶å’Œ APIï¼Œæå‡å¼€å‘æ•ˆç‡
- **Vue DevTools**ï¼šå¼€å‘æ—¶è°ƒè¯• Vue ç»„ä»¶çŠ¶æ€

### 2.2 é…ç½® ESLint (eslint.config.js)

```javascript
import js from '@eslint/js'
import pluginVue from 'eslint-plugin-vue'
import skipFormatting from '@vue/eslint-config-prettier/skip-formatting'

export default [
  {
    name: 'app/files-to-lint',
    files: ['**/*.{js,mjs,jsx,vue}'],
  },
  {
    name: 'app/files-to-ignore',
    ignores: ['**/dist/**', '**/dist-ssr/**', '**/coverage/**'],
  },
  js.configs.recommended,
  ...pluginVue.configs['flat/essential'],
  skipFormatting,
]
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **ä»£ç è§„èŒƒ**ï¼šç»Ÿä¸€ä»£ç é£æ ¼ï¼Œæé«˜ä»£ç è´¨é‡
- **Prettier é›†æˆ**ï¼šè‡ªåŠ¨æ ¼å¼åŒ–ä»£ç 

### 2.3 é…ç½® jsconfig.json

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

**ä½œç”¨**ï¼šè®© IDE è¯†åˆ«è·¯å¾„åˆ«åï¼Œæä¾›ä»£ç æç¤ºå’Œè·³è½¬

---

## ğŸ“ ç¬¬ä¸‰æ­¥ï¼šé¡¹ç›®ç›®å½•ç»“æ„æ­å»º

### 3.1 åˆ›å»ºç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ assets/          # é™æ€èµ„æº
â”‚   â”œâ”€â”€ photo/      # å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ styles/     # æ ·å¼æ–‡ä»¶
â”‚       â”œâ”€â”€ main.scss      # ä¸»æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ variables.scss # SCSS å˜é‡
â”œâ”€â”€ components/      # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ChatInput.vue      # èŠå¤©è¾“å…¥æ¡†
â”‚   â”œâ”€â”€ ChatMessage.vue    # æ¶ˆæ¯æ˜¾ç¤ºç»„ä»¶
â”‚   â”œâ”€â”€ DialogEdit.vue     # å¯¹è¯ç¼–è¾‘å¼¹çª—
â”‚   â”œâ”€â”€ PopupMenu.vue      # ä¾§è¾¹èœå•
â”‚   â”œâ”€â”€ SearchDialog.vue   # æœç´¢å¯¹è¯æ¡†
â”‚   â””â”€â”€ SettingsPanel.vue  # è®¾ç½®é¢æ¿
â”œâ”€â”€ stores/         # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ chat.js     # èŠå¤©ç›¸å…³çŠ¶æ€
â”‚   â””â”€â”€ setting.js  # è®¾ç½®ç›¸å…³çŠ¶æ€
â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ api.js      # API è¯·æ±‚å°è£…
â”‚   â”œâ”€â”€ markdown.js # Markdown å¤„ç†
â”‚   â””â”€â”€ messageHandler.js # æ¶ˆæ¯å¤„ç†é€»è¾‘
â”œâ”€â”€ views/          # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ HomePage.vue # é¦–é¡µ
â”‚   â””â”€â”€ ChatView.vue # èŠå¤©é¡µé¢
â”œâ”€â”€ router/         # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ index.js
â”œâ”€â”€ App.vue         # æ ¹ç»„ä»¶
â””â”€â”€ main.js         # å…¥å£æ–‡ä»¶
```

---

## ğŸ¯ ç¬¬å››æ­¥ï¼šæ ¸å¿ƒåŠŸèƒ½å®ç°

### 4.1 åº”ç”¨å…¥å£é…ç½® (main.js)

```javascript
import { createApp } from 'vue'
import { createPinia } from 'pinia'
import persist from 'pinia-plugin-persistedstate'
import App from './App.vue'
import router from './router'
import './assets/styles/main.scss'
import 'animate.css'

const app = createApp(App)

// ä½¿ç”¨ Pinia çŠ¶æ€ç®¡ç†ï¼Œå¹¶å¯ç”¨æŒä¹…åŒ–æ’ä»¶
app.use(createPinia().use(persist))

// ä½¿ç”¨ Vue Router
app.use(router)

app.mount('#app')
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **Pinia æŒä¹…åŒ–**ï¼šä½¿ç”¨ `pinia-plugin-persistedstate` å°†çŠ¶æ€ä¿å­˜åˆ° localStorage
- **å…¨å±€æ ·å¼**ï¼šå¼•å…¥ SCSS ä¸»æ–‡ä»¶å’ŒåŠ¨ç”»åº“

### 4.2 è·¯ç”±é…ç½® (router/index.js)

```javascript
import { createRouter, createWebHistory } from 'vue-router'
import HomePage from '@/views/HomePage.vue'
import ChatView from '@/views/ChatView.vue'

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    {
      path: '/',
      name: 'home',
      component: HomePage,
    },
    {
      path: '/chat',
      name: 'chat',
      component: ChatView,
    },
  ],
})

export default router
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **createWebHistory**ï¼šä½¿ç”¨ HTML5 History æ¨¡å¼ï¼ŒURL æ›´ç¾è§‚ï¼ˆæ—  # å·ï¼‰
- **è·¯ç”±æ‡’åŠ è½½**ï¼šå¯ä»¥é…åˆåŠ¨æ€ import å®ç°ä»£ç åˆ†å‰²

### 4.3 çŠ¶æ€ç®¡ç† - èŠå¤©çŠ¶æ€ (stores/chat.js)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- ç®¡ç†å¤šä¸ªå¯¹è¯ä¼šè¯
- å½“å‰å¯¹è¯åˆ‡æ¢
- æ¶ˆæ¯çš„å¢åˆ æ”¹æŸ¥
- åŠ è½½çŠ¶æ€ç®¡ç†

**æŠ€æœ¯å®ç°ï¼š**
```javascript
import { ref, computed } from 'vue'
import { defineStore } from 'pinia'

export const useChatStore = defineStore('llm-chat', () => {
  // å“åº”å¼æ•°æ®
  const conversations = ref([...]) // æ‰€æœ‰å¯¹è¯åˆ—è¡¨
  const currentConversationId = ref('1') // å½“å‰å¯¹è¯ ID
  const isLoading = ref(false) // åŠ è½½çŠ¶æ€

  // è®¡ç®—å±æ€§
  const currentConversation = computed(() => {
    return conversations.value.find(conv => conv.id === currentConversationId.value)
  })

  // æ–¹æ³•
  const createConversation = () => { ... }
  const switchConversation = (id) => { ... }
  const addMessage = (message) => { ... }
  const updateLastMessage = (content) => { ... }
  
  return { ... }
}, {
  persist: true // å¯ç”¨æŒä¹…åŒ–
})
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **Composition API**ï¼šä½¿ç”¨ `ref`ã€`computed` ç­‰å“åº”å¼ API
- **Pinia Store**ï¼šä½¿ç”¨ `defineStore` å®šä¹‰çŠ¶æ€ç®¡ç†
- **æŒä¹…åŒ–å­˜å‚¨**ï¼šé…ç½® `persist: true` è‡ªåŠ¨ä¿å­˜åˆ° localStorage

### 4.4 çŠ¶æ€ç®¡ç† - è®¾ç½®çŠ¶æ€ (stores/setting.js)

**åŠŸèƒ½ï¼š**
- API Key é…ç½®
- æ¨¡å‹é€‰æ‹©
- æµå¼å“åº”å¼€å…³
- Token é™åˆ¶ç­‰å‚æ•°

**æŠ€æœ¯ç‚¹ï¼š**
- ä½¿ç”¨ Pinia ç®¡ç†å…¨å±€è®¾ç½®
- æŒä¹…åŒ–ä¿å­˜ç”¨æˆ·é…ç½®

### 4.5 API è¯·æ±‚å°è£… (utils/api.js)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- å°è£… OpenAI å…¼å®¹çš„ API è¯·æ±‚
- æ”¯æŒæµå¼å’Œéæµå¼å“åº”
- é”™è¯¯å¤„ç†
- æ€§èƒ½ç»Ÿè®¡ï¼ˆå“åº”é€Ÿåº¦è®¡ç®—ï¼‰

**æŠ€æœ¯å®ç°ï¼š**
```javascript
export const createChatCompletion = async (messages) => {
  const settingStore = useSettingStore()
  const payload = {
    model: settingStore.settings.model,
    messages,
    stream: settingStore.settings.stream,
    max_tokens: settingStore.settings.maxTokens,
    // ... å…¶ä»–å‚æ•°
  }

  const response = await fetch(`${API_BASE_URL}/chat/completions`, {
    method: 'POST',
    headers: {
      Authorization: `Bearer ${settingStore.settings.apiKey}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(payload),
  })

  if (settingStore.settings.stream) {
    return response // è¿”å›æµå¼å“åº”å¯¹è±¡
  } else {
    const data = await response.json()
    // è®¡ç®—å“åº”é€Ÿåº¦
    data.speed = (data.usage.completion_tokens / duration).toFixed(2)
    return data
  }
}
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **Fetch API**ï¼šä½¿ç”¨åŸç”Ÿ fetch è¿›è¡Œ HTTP è¯·æ±‚
- **æµå¼å“åº”**ï¼šæ”¯æŒ Server-Sent Events (SSE) æµå¼ä¼ è¾“
- **æ€§èƒ½ç›‘æ§**ï¼šè®¡ç®— token/ç§’çš„å“åº”é€Ÿåº¦

### 4.6 Markdown æ¸²æŸ“ (utils/markdown.js)

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- Markdown æ–‡æœ¬è§£æ
- ä»£ç è¯­æ³•é«˜äº®
- Emoji æ”¯æŒ
- é“¾æ¥è‡ªåŠ¨è¯†åˆ«

**æŠ€æœ¯å®ç°ï¼š**
```javascript
import MarkdownIt from 'markdown-it'
import hljs from 'highlight.js'
import mdLinkAttributes from 'markdown-it-link-attributes'
import { full as emoji } from 'markdown-it-emoji'

const md = new MarkdownIt({
  html: true,        // å¯ç”¨ HTML æ ‡ç­¾
  breaks: true,      // è½¬æ¢æ¢è¡Œç¬¦ä¸º <br>
  linkify: true,     // è‡ªåŠ¨è½¬æ¢ URL ä¸ºé“¾æ¥
  highlight: function (str, lang) {
    // ä»£ç é«˜äº®å¤„ç†
    if (lang && hljs.getLanguage(lang)) {
      const highlighted = hljs.highlight(str, { language: lang }).value
      return `<pre class="hljs"><code>${highlighted}</code></pre>`
    }
    return `<pre><code>${md.utils.escapeHtml(str)}</code></pre>`
  },
})

// é…ç½®æ’ä»¶
md.use(mdLinkAttributes, { attrs: { target: '_blank', rel: 'noopener' } })
md.use(emoji)

export const renderMarkdown = (content) => {
  return md.render(content)
}
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **Markdown-it**ï¼šå¯æ‰©å±•çš„ Markdown è§£æå™¨
- **Highlight.js**ï¼šä»£ç è¯­æ³•é«˜äº®åº“
- **æ’ä»¶ç³»ç»Ÿ**ï¼šé€šè¿‡ `use()` æ–¹æ³•æ‰©å±•åŠŸèƒ½

### 4.7 æ¶ˆæ¯å¤„ç† (utils/messageHandler.js)

**åŠŸèƒ½ï¼š**
- æµå¼å“åº”è§£æ
- æ¶ˆæ¯æ ¼å¼å¤„ç†
- é”™è¯¯å¤„ç†

**æŠ€æœ¯ç‚¹ï¼š**
- ä½¿ç”¨ `ReadableStream` å¤„ç†æµå¼æ•°æ®
- é€å­—ç¬¦è§£æ SSE æ ¼å¼æ•°æ®

---

## ğŸ¨ ç¬¬äº”æ­¥ï¼šUI ç»„ä»¶å¼€å‘

### 5.1 èŠå¤©è¾“å…¥æ¡†ç»„ä»¶ (ChatInput.vue)

**åŠŸèƒ½ï¼š**
- å¤šè¡Œæ–‡æœ¬è¾“å…¥
- æ–‡ä»¶ä¸Šä¼ 
- å¿«æ·é”®æ”¯æŒï¼ˆEnter å‘é€ï¼ŒShift+Enter æ¢è¡Œï¼‰
- å‘é€æŒ‰é’®

**æŠ€æœ¯ç‚¹ï¼š**
- ä½¿ç”¨ Element Plus çš„ `el-input` ç»„ä»¶
- æ–‡ä»¶ä¸Šä¼ ä½¿ç”¨ `el-upload`
- äº‹ä»¶å¤„ç†ï¼š`@keydown` ç›‘å¬é”®ç›˜äº‹ä»¶

### 5.2 æ¶ˆæ¯æ˜¾ç¤ºç»„ä»¶ (ChatMessage.vue)

**åŠŸèƒ½ï¼š**
- ç”¨æˆ·æ¶ˆæ¯å’Œ AI æ¶ˆæ¯åŒºåˆ†æ˜¾ç¤º
- Markdown æ¸²æŸ“
- ä»£ç å—å¤åˆ¶åŠŸèƒ½
- æ¶ˆæ¯æ“ä½œï¼ˆç¼–è¾‘ã€åˆ é™¤ã€é‡æ–°ç”Ÿæˆï¼‰

**æŠ€æœ¯ç‚¹ï¼š**
- ä½¿ç”¨ `v-html` æ¸²æŸ“ Markdown HTMLï¼ˆæ³¨æ„ XSS é˜²æŠ¤ï¼‰
- åŠ¨æ€ç»‘å®š class åŒºåˆ†æ¶ˆæ¯ç±»å‹
- ä½¿ç”¨ `highlight.js` é«˜äº®ä»£ç 

### 5.3 è®¾ç½®é¢æ¿ç»„ä»¶ (SettingsPanel.vue)

**åŠŸèƒ½ï¼š**
- API Key é…ç½®
- æ¨¡å‹é€‰æ‹©ä¸‹æ‹‰æ¡†
- å‚æ•°è°ƒèŠ‚ï¼ˆTemperatureã€Top Pã€Top K ç­‰ï¼‰
- ä¸»é¢˜åˆ‡æ¢

**æŠ€æœ¯ç‚¹ï¼š**
- ä½¿ç”¨ Element Plus è¡¨å•ç»„ä»¶
- åŒå‘ç»‘å®šè®¾ç½®çŠ¶æ€
- å®æ—¶ä¿å­˜åˆ° Pinia store

### 5.4 å…¶ä»–ç»„ä»¶

- **PopupMenu.vue**ï¼šä¾§è¾¹æ èœå•ï¼Œä¼šè¯åˆ—è¡¨ç®¡ç†
- **DialogEdit.vue**ï¼šç¼–è¾‘å¯¹è¯æ ‡é¢˜çš„å¼¹çª—
- **SearchDialog.vue**ï¼šå†…è”æœç´¢å¯¹è¯æ¡†

---

## ğŸ¨ ç¬¬å…­æ­¥ï¼šæ ·å¼ä¸ä¸»é¢˜

### 6.1 SCSS å˜é‡å®šä¹‰ (assets/styles/variables.scss)

```scss
// é¢œè‰²å˜é‡
$primary-color: #409eff;
$success-color: #67c23a;
$warning-color: #e6a23c;
$danger-color: #f56c6c;

// ä¸»é¢˜å˜é‡
$light-bg: #ffffff;
$dark-bg: #1e1e1e;
```

### 6.2 ä¸»æ ·å¼æ–‡ä»¶ (assets/styles/main.scss)

**åŠŸèƒ½ï¼š**
- å…¨å±€æ ·å¼é‡ç½®
- ä»£ç å—æ ·å¼
- å“åº”å¼å¸ƒå±€
- æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢

**æŠ€æœ¯ç‚¹ï¼š**
- ä½¿ç”¨ CSS å˜é‡å®ç°ä¸»é¢˜åˆ‡æ¢
- åª’ä½“æŸ¥è¯¢å®ç°å“åº”å¼è®¾è®¡
- ä½¿ç”¨ SCSS åµŒå¥—å’Œå˜é‡

---

## ğŸ”„ ç¬¬ä¸ƒæ­¥ï¼šæ ¸å¿ƒåŠŸèƒ½å®ç°ç»†èŠ‚

### 7.1 æµå¼å“åº”å¤„ç†

**å®ç°åŸç†ï¼š**
```javascript
// åœ¨ç»„ä»¶ä¸­å¤„ç†æµå¼å“åº”
const handleStreamResponse = async (response) => {
  const reader = response.body.getReader()
  const decoder = new TextDecoder()
  let buffer = ''

  while (true) {
    const { done, value } = await reader.read()
    if (done) break

    buffer += decoder.decode(value, { stream: true })
    const lines = buffer.split('\n')
    buffer = lines.pop() // ä¿ç•™ä¸å®Œæ•´çš„è¡Œ

    for (const line of lines) {
      if (line.startsWith('data: ')) {
        const data = line.slice(6)
        if (data === '[DONE]') return
        
        try {
          const json = JSON.parse(data)
          const content = json.choices[0]?.delta?.content || ''
          // å®æ—¶æ›´æ–°æ¶ˆæ¯å†…å®¹
          updateLastMessage(content)
        } catch (e) {
          console.error('Parse error:', e)
        }
      }
    }
  }
}
```

**æŠ€æœ¯ç‚¹è¯´æ˜ï¼š**
- **ReadableStream**ï¼šå¤„ç†æµå¼æ•°æ®
- **TextDecoder**ï¼šå°†å­—èŠ‚æµè½¬æ¢ä¸ºæ–‡æœ¬
- **å¢é‡æ›´æ–°**ï¼šé€å­—ç¬¦æ›´æ–° UIï¼Œå®ç°æ‰“å­—æœºæ•ˆæœ

### 7.2 æ¶ˆæ¯æŒä¹…åŒ–

**å®ç°æ–¹å¼ï¼š**
- ä½¿ç”¨ `pinia-plugin-persistedstate` è‡ªåŠ¨æŒä¹…åŒ–
- æ•°æ®ä¿å­˜åˆ° `localStorage`
- é¡µé¢åˆ·æ–°åè‡ªåŠ¨æ¢å¤ä¼šè¯å’Œæ¶ˆæ¯

### 7.3 ä»£ç å¤åˆ¶åŠŸèƒ½

**å®ç°åŸç†ï¼š**
```javascript
const copyCode = (code) => {
  navigator.clipboard.writeText(code).then(() => {
    // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
    ElMessage.success('å¤åˆ¶æˆåŠŸ')
  })
}
```

**æŠ€æœ¯ç‚¹ï¼š**
- ä½¿ç”¨ Clipboard API
- æä¾›ç”¨æˆ·åé¦ˆï¼ˆæˆåŠŸæç¤ºï¼‰

---

## ğŸ› ï¸ ç¬¬å…«æ­¥ï¼šå¼€å‘å·¥å…·é…ç½®

### 8.1 Git Hooks é…ç½®

**package.json é…ç½®ï¼š**
```json
{
  "lint-staged": {
    "*.{js,ts,vue}": ["eslint --fix"]
  },
  "scripts": {
    "prepare": "husky install"
  }
}
```

**åŠŸèƒ½ï¼š**
- æäº¤å‰è‡ªåŠ¨è¿è¡Œ ESLint
- ç¡®ä¿ä»£ç è´¨é‡

### 8.2 å¼€å‘è„šæœ¬

```json
{
  "scripts": {
    "dev": "vite",              // å¼€å‘æœåŠ¡å™¨
    "build": "vite build",      // ç”Ÿäº§æ„å»º
    "preview": "vite preview",  // é¢„è§ˆæ„å»ºç»“æœ
    "lint": "eslint . --fix",   // ä»£ç æ£€æŸ¥
    "format": "prettier --write src/" // ä»£ç æ ¼å¼åŒ–
  }
}
```

---

## ğŸ“¦ ç¬¬ä¹æ­¥ï¼šæ„å»ºä¸éƒ¨ç½²

### 9.1 ç”Ÿäº§æ„å»º

```bash
pnpm build
```

**æ„å»ºäº§ç‰©ï¼š**
- ä»£ç å‹ç¼©å’Œæ··æ·†
- Tree-shaking ç§»é™¤æœªä½¿ç”¨ä»£ç 
- èµ„æºä¼˜åŒ–ï¼ˆå›¾ç‰‡ã€CSS ç­‰ï¼‰

### 9.2 éƒ¨ç½²

**å¯éƒ¨ç½²åˆ°ï¼š**
- Vercel
- Netlify
- GitHub Pages
- è‡ªå»ºæœåŠ¡å™¨ï¼ˆNginxï¼‰

---

## ğŸ¯ é¢è¯•æŠ€æœ¯ç‚¹æ€»ç»“

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

1. **Vue 3 Composition API**
   - ä¸ºä»€ä¹ˆé€‰æ‹© Composition APIï¼šæ›´å¥½çš„é€»è¾‘å¤ç”¨ã€TypeScript æ”¯æŒã€æ€§èƒ½ä¼˜åŒ–
   - `ref`ã€`reactive`ã€`computed`ã€`watch` çš„ä½¿ç”¨åœºæ™¯

2. **Pinia çŠ¶æ€ç®¡ç†**
   - ä¸ Vuex çš„åŒºåˆ«ï¼šæ›´ç®€æ´çš„ APIã€æ›´å¥½çš„ TypeScript æ”¯æŒ
   - æŒä¹…åŒ–å­˜å‚¨çš„å®ç°æ–¹å¼

3. **Vite æ„å»ºå·¥å…·**
   - ä¸ºä»€ä¹ˆé€‰æ‹© Viteï¼šå¼€å‘æ—¶ä½¿ç”¨ ES æ¨¡å—ï¼Œå¯åŠ¨é€Ÿåº¦å¿«
   - ä¸ Webpack çš„åŒºåˆ«ï¼šåŸºäº ESM çš„æ„å»ºï¼Œæ— éœ€æ‰“åŒ…å³å¯è¿è¡Œ

4. **æµå¼å“åº”å¤„ç†**
   - Server-Sent Events (SSE) åŸç†
   - ReadableStream API çš„ä½¿ç”¨
   - å®æ—¶æ›´æ–° UI çš„å®ç°æ–¹å¼

5. **Markdown æ¸²æŸ“**
   - Markdown-it æ’ä»¶ç³»ç»Ÿ
   - ä»£ç é«˜äº®çš„å®ç°
   - XSS é˜²æŠ¤æªæ–½

6. **å“åº”å¼è®¾è®¡**
   - CSS å˜é‡å®ç°ä¸»é¢˜åˆ‡æ¢
   - åª’ä½“æŸ¥è¯¢é€‚é…ä¸åŒå±å¹•
   - Flexbox/Grid å¸ƒå±€

### é¡¹ç›®äº®ç‚¹

1. **æ€§èƒ½ä¼˜åŒ–**
   - ç»„ä»¶æ‡’åŠ è½½
   - ä»£ç åˆ†å‰²
   - å›¾ç‰‡ä¼˜åŒ–

2. **ç”¨æˆ·ä½“éªŒ**
   - æµå¼å“åº”æä¾›å®æ—¶åé¦ˆ
   - æ·±è‰²/æµ…è‰²ä¸»é¢˜åˆ‡æ¢
   - å¿«æ·é”®æ”¯æŒ
   - ä»£ç å¤åˆ¶åŠŸèƒ½

3. **ä»£ç è´¨é‡**
   - ESLint ä»£ç è§„èŒƒ
   - Prettier ä»£ç æ ¼å¼åŒ–
   - Git Hooks è‡ªåŠ¨åŒ–æ£€æŸ¥

4. **å¯ç»´æŠ¤æ€§**
   - ç»„ä»¶åŒ–å¼€å‘
   - çŠ¶æ€ç®¡ç†é›†ä¸­åŒ–
   - å·¥å…·å‡½æ•°æ¨¡å—åŒ–

---

## ğŸ“š å­¦ä¹ èµ„æºæ¨è

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://cn.vuejs.org/)
- [Pinia å®˜æ–¹æ–‡æ¡£](https://pinia.vuejs.org/zh/)
- [Vite å®˜æ–¹æ–‡æ¡£](https://cn.vitejs.dev/)
- [Element Plus æ–‡æ¡£](https://element-plus.org/zh-CN/)

---

## ğŸ“ æ€»ç»“

æœ¬é¡¹ç›®ä»é›¶å¼€å§‹ï¼Œå®Œæ•´å±•ç¤ºäº†ï¼š
1. é¡¹ç›®åˆå§‹åŒ–å’Œç¯å¢ƒæ­å»º
2. æŠ€æœ¯æ ˆé€‰å‹å’Œé…ç½®
3. é¡¹ç›®ç»“æ„è®¾è®¡
4. æ ¸å¿ƒåŠŸèƒ½å®ç°
5. UI ç»„ä»¶å¼€å‘
6. æ ·å¼å’Œä¸»é¢˜ç³»ç»Ÿ
7. æ„å»ºå’Œéƒ¨ç½²æµç¨‹

æ¯ä¸ªæ­¥éª¤éƒ½åŒ…å«äº†å…·ä½“çš„æŠ€æœ¯å®ç°å’ŒåŸç†è¯´æ˜ï¼Œé€‚åˆåœ¨é¢è¯•ä¸­è¯¦ç»†è®²è§£é¡¹ç›®çš„æŠ€æœ¯ç»†èŠ‚ã€‚

